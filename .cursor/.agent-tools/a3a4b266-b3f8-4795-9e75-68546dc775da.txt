
> rest-express@1.0.0 check
> tsc

client/src/components/BetSlip.tsx(131,14): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(133,22): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(134,22): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(145,33): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(147,16): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(152,20): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(157,18): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(168,20): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(176,20): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(184,18): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(184,50): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(186,19): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(186,51): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(186,102): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(186,134): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(194,20): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(194,51): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(200,12): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(200,27): error TS2339: Property 'createdAt' does not exist on type 'Runner'.
client/src/components/BetSlip.tsx(205,46): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(205,61): error TS2339: Property 'createdAt' does not exist on type 'Runner'.
client/src/components/BetSlip.tsx(217,14): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(219,23): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/BetSlip.tsx(230,55): error TS18047: 'selectedRunner' is possibly 'null'.
client/src/components/RunnerGrid.tsx(99,59): error TS2339: Property 'style' does not exist on type 'Element'.
client/src/components/StandardWalletBar.tsx(118,22): error TS18046: 'error' is of type 'unknown'.
client/src/lib/solana.ts(29,50): error TS2769: No overload matches this call.
  The last overload gave the following error.
    Argument of type '{ endpoint: any; }' is not assignable to parameter of type 'Attributes & ConnectionProviderProps'.
      Property 'children' is missing in type '{ endpoint: any; }' but required in type 'ConnectionProviderProps'.
client/src/lib/solana.ts(30,41): error TS2769: No overload matches this call.
  The last overload gave the following error.
    Argument of type '{ wallets: PhantomWalletAdapter[]; autoConnect: false; onError: (error: WalletError) => void; }' is not assignable to parameter of type 'Attributes & WalletProviderProps'.
      Property 'children' is missing in type '{ wallets: PhantomWalletAdapter[]; autoConnect: false; onError: (error: WalletError) => void; }' but required in type 'WalletProviderProps'.
client/src/lib/solana.ts(40,48): error TS2769: No overload matches this call.
  The last overload gave the following error.
    Argument of type '{}' is not assignable to parameter of type 'Attributes & WalletModalProviderProps'.
      Property 'children' is missing in type '{}' but required in type 'WalletModalProviderProps'.
client/src/lib/spl.ts(37,5): error TS2740: Type 'Uint8Array' is missing the following properties from type 'Buffer': write, toJSON, equals, compare, and 66 more.
client/src/lib/standardWallet.ts(22,11): error TS2300: Duplicate identifier 'publicKey'.
client/src/lib/standardWallet.ts(36,26): error TS18048: 'window.phantom' is possibly 'undefined'.
client/src/lib/standardWallet.ts(36,26): error TS18048: 'window.phantom.solana' is possibly 'undefined'.
client/src/lib/standardWallet.ts(37,29): error TS18048: 'window.phantom' is possibly 'undefined'.
client/src/lib/standardWallet.ts(37,29): error TS18048: 'window.phantom.solana' is possibly 'undefined'.
client/src/lib/standardWallet.ts(38,36): error TS18048: 'window.phantom' is possibly 'undefined'.
client/src/lib/standardWallet.ts(38,36): error TS18048: 'window.phantom.solana' is possibly 'undefined'.
client/src/lib/standardWallet.ts(39,33): error TS18048: 'window.phantom' is possibly 'undefined'.
client/src/lib/standardWallet.ts(39,33): error TS18048: 'window.phantom.solana' is possibly 'undefined'.
client/src/lib/standardWallet.ts(40,35): error TS18048: 'window.phantom' is possibly 'undefined'.
client/src/lib/standardWallet.ts(40,35): error TS18048: 'window.phantom.solana' is possibly 'undefined'.
client/src/lib/standardWallet.ts(41,36): error TS18048: 'window.phantom' is possibly 'undefined'.
client/src/lib/standardWallet.ts(41,36): error TS18048: 'window.phantom.solana' is possibly 'undefined'.
client/src/lib/standardWallet.ts(51,26): error TS18048: 'window.solflare' is possibly 'undefined'.
client/src/lib/standardWallet.ts(52,29): error TS18048: 'window.solflare' is possibly 'undefined'.
client/src/lib/standardWallet.ts(53,36): error TS18048: 'window.solflare' is possibly 'undefined'.
client/src/lib/standardWallet.ts(54,33): error TS18048: 'window.solflare' is possibly 'undefined'.
client/src/lib/standardWallet.ts(55,35): error TS18048: 'window.solflare' is possibly 'undefined'.
client/src/lib/standardWallet.ts(56,36): error TS18048: 'window.solflare' is possibly 'undefined'.
client/src/lib/standardWallet.ts(154,7): error TS2300: Duplicate identifier 'publicKey'.
client/src/lib/standardWallet.ts(169,5): error TS2717: Subsequent property declarations must have the same type.  Property 'phantom' must be of type '{ solana?: { isPhantom: boolean; connect(options?: { onlyIfTrusted?: boolean | undefined; } | undefined): Promise<{ publicKey: PublicKey; }>; disconnect(): Promise<...>; signTransaction(transaction: any): Promise<...>; signMessage(message: Uint8Array): Promise<...>; on(event: string, handler: Function): void; off(ev...', but here has type '{ solana?: { isPhantom: boolean; connect(): Promise<{ publicKey: PublicKey; }>; disconnect(): Promise<void>; signTransaction(transaction: any): Promise<...>; signMessage(message: Uint8Array): Promise<...>; on(event: string, handler: Function): void; off(event: string, handler: Function): void; } | undefined; } | und...'.
client/src/pages/Admin.tsx(250,60): error TS2339: Property 'toString' does not exist on type 'never'.
client/src/pages/Admin.tsx(606,32): error TS2339: Property 'length' does not exist on type '{}'.
client/src/pages/Admin.tsx(608,24): error TS2339: Property 'slice' does not exist on type '{}'.
client/src/pages/LiveRace.tsx(135,43): error TS2339: Property 'lockedTs' does not exist on type 'Race'.
client/src/pages/LiveRace.tsx(171,46): error TS2339: Property 'lockedTs' does not exist on type 'Race'.
client/src/pages/LiveRace.tsx(207,39): error TS2339: Property 'lockedTs' does not exist on type 'Race'.
client/src/pages/LiveRace.tsx(263,39): error TS2339: Property 'lockedTs' does not exist on type 'Race'.
client/src/pages/LiveRace.tsx(273,37): error TS2339: Property 'lockedTs' does not exist on type 'Race'.
client/src/pages/RaceDetail.tsx(376,43): error TS18047: 'wallet.address' is possibly 'null'.
client/src/pages/RaceDetail.tsx(390,9): error TS2740: Type 'Uint8Array' is missing the following properties from type 'Buffer': write, toJSON, equals, compare, and 66 more.
client/src/pages/RaceDetail.tsx(520,19): error TS2339: Property 'status' does not exist on type '{}'.
client/src/pages/RaceDetail.tsx(520,52): error TS2339: Property 'status' does not exist on type '{}'.
client/src/pages/RaceDetail.tsx(523,17): error TS2339: Property 'status' does not exist on type '{}'.
client/src/pages/RaceDetail.tsx(740,67): error TS2339: Property 'style' does not exist on type 'Element'.
client/src/pages/Results.tsx(128,21): error TS2448: Block-scoped variable 'winnerIndex' used before its declaration.
client/src/pages/Results.tsx(128,21): error TS2454: Variable 'winnerIndex' is used before being assigned.
client/src/pages/Results.tsx(320,48): error TS2339: Property 'raceDuration' does not exist on type '{}'.
client/src/pages/Results.tsx(320,88): error TS2339: Property 'dataSource' does not exist on type '{}'.
client/src/pages/Results.tsx(323,38): error TS2339: Property 'verificationData' does not exist on type '{}'.
client/src/pages/Results.tsx(327,51): error TS2339: Property 'winnerIndex' does not exist on type '{}'.
server/admin.ts(110,7): error TS2322: Type '{ symbol: string; name: string; createdAt: number; mint: string; initialPrice: number; logoURI?: string | undefined; geckoTerminalUrl?: string | undefined; priceChangeH1?: number | undefined; currentPrice?: number | undefined; priceChange?: number | undefined; volume24h?: number | undefined; marketCap?: number | und...' is not assignable to type '{ symbol: string; name: string; mint: string; marketCap: number; logoURI?: string | undefined; createdAt?: number | undefined; geckoTerminalUrl?: string | undefined; priceChangeH1?: number | undefined; ... 6 more ...; poolAddress?: string | undefined; }[]'.
  Type '{ symbol: string; name: string; createdAt: number; mint: string; initialPrice: number; logoURI?: string | undefined; geckoTerminalUrl?: string | undefined; priceChangeH1?: number | undefined; currentPrice?: number | undefined; priceChange?: number | undefined; volume24h?: number | undefined; marketCap?: number | und...' is not assignable to type '{ symbol: string; name: string; mint: string; marketCap: number; logoURI?: string | undefined; createdAt?: number | undefined; geckoTerminalUrl?: string | undefined; priceChangeH1?: number | undefined; ... 6 more ...; poolAddress?: string | undefined; }'.
    Types of property 'marketCap' are incompatible.
      Type 'number | undefined' is not assignable to type 'number'.
        Type 'undefined' is not assignable to type 'number'.
server/backfill.ts(64,43): error TS2802: Type 'MapIterator<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/backfill.ts(64,66): error TS2802: Type 'MapIterator<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/backfill.ts(65,28): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/bets.ts(93,30): error TS2802: Type 'MapIterator<[string, number]>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/bets.ts(139,64): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'PublicKeyInitData'.
  Type 'undefined' is not assignable to type 'PublicKeyInitData'.
server/bets.ts(144,27): error TS2345: Argument of type 'string | undefined' is not assignable to parameter of type 'PublicKeyInitData'.
  Type 'undefined' is not assignable to type 'PublicKeyInitData'.
server/bets.ts(266,62): error TS2339: Property 'neq' does not exist on type 'Decimal'.
server/bets.ts(402,32): error TS2339: Property 'runnerIdx' does not exist on type '{ id: string; wallet: string; amount: string; marketId: string; tokenIdx: number; sig: string; ts: number; slot?: number | undefined; blockTimeMs?: number | undefined; }'.
server/cache-coordinator.ts(25,30): error TS2339: Property 'flushAll' does not exist on type 'NodeCache'.
server/cache-coordinator.ts(26,30): error TS2339: Property 'flushAll' does not exist on type 'NodeCache'.
server/cache-coordinator.ts(27,30): error TS2339: Property 'flushAll' does not exist on type 'NodeCache'.
server/cache-coordinator.ts(35,30): error TS2339: Property 'flushAll' does not exist on type 'NodeCache'.
server/cache-coordinator.ts(36,30): error TS2339: Property 'flushAll' does not exist on type 'NodeCache'.
server/cache-coordinator.ts(46,38): error TS2339: Property 'keys' does not exist on type 'NodeCache'.
server/cache-coordinator.ts(47,39): error TS2339: Property 'getStats' does not exist on type 'NodeCache'.
server/cache-coordinator.ts(50,38): error TS2339: Property 'keys' does not exist on type 'NodeCache'.
server/cache-coordinator.ts(51,39): error TS2339: Property 'getStats' does not exist on type 'NodeCache'.
server/cache-coordinator.ts(54,38): error TS2339: Property 'keys' does not exist on type 'NodeCache'.
server/cache-coordinator.ts(55,39): error TS2339: Property 'getStats' does not exist on type 'NodeCache'.
server/db.ts(1285,36): error TS2339: Property 'query' does not exist on type 'never'.
server/db.ts(1301,36): error TS2339: Property 'query' does not exist on type 'never'.
server/house-seed.ts(33,48): error TS2339: Property 'clientId' does not exist on type '{ id: string; wallet: string; amount: string; marketId: string; tokenIdx: number; sig: string; ts: number; slot?: number | undefined; blockTimeMs?: number | undefined; }'.
server/house-seed.ts(33,79): error TS2339: Property 'memo' does not exist on type '{ id: string; wallet: string; amount: string; marketId: string; tokenIdx: number; sig: string; ts: number; slot?: number | undefined; blockTimeMs?: number | undefined; }'.
server/index.ts(317,65): error TS2345: Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
server/index.ts(387,53): error TS2345: Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
server/index.ts(397,60): error TS2345: Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
server/index.ts(415,65): error TS2345: Argument of type 'unknown' is not assignable to parameter of type 'undefined'.
server/index.ts(441,38): error TS2304: Cannot find name 'registerRoutes'.
server/logo-cache.ts(9,15): error TS2345: Argument of type '"logoCache"' is not assignable to parameter of type 'keyof CacheRegistry'.
server/race-state-machine.ts(668,38): error TS2802: Type 'MapIterator<[string, any]>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/race-state-machine.ts(728,23): error TS7053: Element implicitly has an 'any' type because expression of type 'RaceStatus' can't be used to index type '{ LOCKED: string; IN_PROGRESS: string; SETTLED: string; CANCELLED: string; }'.
  Property 'OPEN' does not exist on type '{ LOCKED: string; IN_PROGRESS: string; SETTLED: string; CANCELLED: string; }'.
server/routes.ts(554,37): error TS18046: 'error' is of type 'unknown'.
server/settlement.ts(21,25): error TS2345: Argument of type '{ status: "SETTLED"; id: string; duration: number; createdAt: number; tokens: { symbol: string; name: string; createdAt: number; mint: string; initialPrice: number; logoURI?: string | undefined; geckoTerminalUrl?: string | undefined; ... 4 more ...; marketCap?: number | undefined; }[]; ... 6 more ...; winnerIndex?: ...' is not assignable to parameter of type '{ id: string; status: "OPEN" | "LOCKED" | "IN_PROGRESS" | "SETTLED" | "CANCELLED"; runners: { symbol: string; name: string; mint: string; marketCap: number; logoURI?: string | undefined; createdAt?: number | undefined; ... 8 more ...; poolAddress?: string | undefined; }[]; ... 18 more ...; settledBlockTimeMs?: numbe...'.
  Property 'runners' is missing in type '{ status: "SETTLED"; id: string; duration: number; createdAt: number; tokens: { symbol: string; name: string; createdAt: number; mint: string; initialPrice: number; logoURI?: string | undefined; geckoTerminalUrl?: string | undefined; ... 4 more ...; marketCap?: number | undefined; }[]; ... 6 more ...; winnerIndex?: ...' but required in type '{ id: string; status: "OPEN" | "LOCKED" | "IN_PROGRESS" | "SETTLED" | "CANCELLED"; runners: { symbol: string; name: string; mint: string; marketCap: number; logoURI?: string | undefined; createdAt?: number | undefined; ... 8 more ...; poolAddress?: string | undefined; }[]; ... 18 more ...; settledBlockTimeMs?: numbe...'.
server/settlement.ts(39,23): error TS2345: Argument of type '{ status: "SETTLED"; jackpotAdded: number; id: string; duration: number; createdAt: number; tokens: { symbol: string; name: string; createdAt: number; mint: string; initialPrice: number; logoURI?: string | undefined; ... 5 more ...; marketCap?: number | undefined; }[]; ... 5 more ...; winnerIndex?: number | undefine...' is not assignable to parameter of type '{ id: string; status: "OPEN" | "LOCKED" | "IN_PROGRESS" | "SETTLED" | "CANCELLED"; runners: { symbol: string; name: string; mint: string; marketCap: number; logoURI?: string | undefined; createdAt?: number | undefined; ... 8 more ...; poolAddress?: string | undefined; }[]; ... 18 more ...; settledBlockTimeMs?: numbe...'.
  Property 'runners' is missing in type '{ status: "SETTLED"; jackpotAdded: number; id: string; duration: number; createdAt: number; tokens: { symbol: string; name: string; createdAt: number; mint: string; initialPrice: number; logoURI?: string | undefined; ... 5 more ...; marketCap?: number | undefined; }[]; ... 5 more ...; winnerIndex?: number | undefine...' but required in type '{ id: string; status: "OPEN" | "LOCKED" | "IN_PROGRESS" | "SETTLED" | "CANCELLED"; runners: { symbol: string; name: string; mint: string; marketCap: number; logoURI?: string | undefined; createdAt?: number | undefined; ... 8 more ...; poolAddress?: string | undefined; }[]; ... 18 more ...; settledBlockTimeMs?: numbe...'.
server/settlement.ts(211,30): error TS2339: Property 'raceId' does not exist on type '{ id: string; wallet: string; amount: string; marketId: string; sig: string; ts: number; }'.
server/settlement.ts(249,7): error TS2353: Object literal may only specify known properties, and 'raceId' does not exist in type '{ id: string; wallet: string; amount: string; marketId: string; sig: string; ts: number; }'.
server/solana.ts(788,21): error TS2802: Type 'Set<string>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/solana.ts(804,33): error TS2802: Type 'MapIterator<[string, { owner: string; delta: bigint; }[]]>' can only be iterated through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.
server/solana.ts(805,36): error TS7006: Parameter 'c' implicitly has an 'any' type.
server/solana.ts(805,58): error TS7006: Parameter 'c' implicitly has an 'any' type.
server/solana.ts(806,39): error TS7006: Parameter 'c' implicitly has an 'any' type.
server/solana.ts(806,61): error TS7006: Parameter 'c' implicitly has an 'any' type.
server/solana.ts(810,40): error TS7006: Parameter 'r' implicitly has an 'any' type.
server/spl.ts(37,5): error TS2740: Type 'Uint8Array' is missing the following properties from type 'Buffer': write, toJSON, equals, compare, and 66 more.
server/storage.ts(30,11): error TS2739: Type '{ jackpotBalance: string; }' is missing the following properties from type '{ maintenanceMode: boolean; jackpotBalance: string; jackpotBalanceSol: string; maintenanceAnchorRaceId?: string | undefined; maintenanceMessage?: string | undefined; raceMint?: string | undefined; }': maintenanceMode, jackpotBalanceSol
