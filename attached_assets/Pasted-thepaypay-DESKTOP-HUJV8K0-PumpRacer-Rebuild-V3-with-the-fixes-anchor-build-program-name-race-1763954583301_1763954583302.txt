thepaypay@DESKTOP-HUJV8K0:~/PumpRacer$ # Rebuild V3 with the fixes
anchor build --program-name raceswap-v3

# Redeploy to mainnet
solana program deploy \
  --program-id Cy63SzwBBCP5ywaByjUrLuUXQ4pXP9nR7e7kdQqp5uLk \
  target/deploy/raceswap_v3.so
`anchor` 0.30.1 is not installed with `avm`. Installing...

    Updating git repository `https://github.com/coral-xyz/anchor`
warning: skipping duplicate package `swap` found at `/home/thepaypay/.cargo/git/checkouts/anchor-50c4b9c8b5e0501f/e6d7daf/tests/cfo/deps/swap/programs/swap`
warning: skipping duplicate package `shared` found at `/home/thepaypay/.cargo/git/checkouts/anchor-50c4b9c8b5e0501f/e6d7daf/tests/zero-copy/programs/shared`
warning: skipping duplicate package `relations-derivation` found at `/home/thepaypay/.cargo/git/checkouts/anchor-50c4b9c8b5e0501f/e6d7daf/tests/idl/programs/relations-derivation`
warning: skipping duplicate package `docs` found at `/home/thepaypay/.cargo/git/checkouts/anchor-50c4b9c8b5e0501f/e6d7daf/tests/idl/programs/docs`
warning: skipping duplicate package `shared` found at `/home/thepaypay/.cargo/git/checkouts/anchor-50c4b9c8b5e0501f/e6d7daf/tests/misc/programs/shared`
warning: skipping duplicate package `external` found at `/home/thepaypay/.cargo/git/checkouts/anchor-50c4b9c8b5e0501f/e6d7daf/tests/declare-program/programs/external`
error: binary `anchor` already exists in destination
Add --force to overwrite
Error: Failed to install 0.30.1, is it a valid version?
Failed to install `anchor`: failed to install `anchor` 0.30.1 with avm, using 0.32.1 instead
WARNING: `anchor-lang` version(0.30.1) and the current CLI version(0.32.1) don't match.

        This can lead to unwanted behavior. To use the same CLI version, add:

        [toolchain]
        anchor_version = "0.30.1"

        to Anchor.toml

WARNING: Adding `solana-program` as a separate dependency might cause conflicts.
To solve, remove the `solana-program` dependency and use the exported crate from `anchor-lang`.
`use solana_program` becomes `use anchor_lang::solana_program`.
Program name: `raceswap`

   Compiling raceswap-v3 v3.0.0 (/home/thepaypay/PumpRacer/programs/raceswap-v3)
warning: unexpected `cfg` condition value: `custom-heap`
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^
   |
   = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
   = help: consider adding `custom-heap` as a feature in `Cargo.toml`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: `#[warn(unexpected_cfgs)]` on by default
   = note: this warning originates in the macro `$crate::custom_heap_default` which comes from the expansion of the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `custom-panic`
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^
   |
   = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
   = help: consider adding `custom-panic` as a feature in `Cargo.toml`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `$crate::custom_panic_default` which comes from the expansion of the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `anchor-debug`
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^
   |
   = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
   = help: consider adding `anchor-debug` as a feature in `Cargo.toml`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `anchor-debug`
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^
   |
   = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
   = help: consider adding `anchor-debug` as a feature in `Cargo.toml`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `anchor-debug`
  --> programs/raceswap-v3/src/lib.rs:97:10
   |
97 | #[derive(Accounts)]
   |          ^^^^^^^^
   |
   = note: expected values for `feature` are: `cpi`, `default`, `idl-build`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
   = help: consider adding `anchor-debug` as a feature in `Cargo.toml`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0107]: struct takes 0 lifetime arguments but 1 lifetime argument was supplied
   --> programs/raceswap-v3/src/lib.rs:23:1
    |
23  | #[program]
    | ^^^^^^^^^^ expected 0 lifetime arguments
    |
note: struct defined here, with 0 lifetime parameters
   --> programs/raceswap-v3/src/lib.rs:117:12
    |
117 | pub struct AccountInfo {
    |            ^^^^^^^^^^^
    = note: this error originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0308]: mismatched types
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^
   | |
   | expected `&[AccountInfo]`, found `&Vec<AccountInfo<'_>>`
   | arguments to this function are incorrect
   |
   = note: expected reference `&[AccountInfo]`
              found reference `&Vec<anchor_lang::prelude::AccountInfo<'_>>`
note: function defined here
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^
   = note: this error originates in the macro `anchor_lang::solana_program::entrypoint` which comes from the expansion of the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0308]: mismatched types
   --> programs/raceswap-v3/src/lib.rs:23:1
    |
23  | #[program]
    | ^^^^^^^^^^
    | |
    | expected `&mut &[AccountInfo<'_>]`, found `&mut &[AccountInfo]`
    | arguments to this function are incorrect
    |
    = note: `AccountInfo` and `anchor_lang::prelude::AccountInfo<'_>` have similar names, but are actually distinct types
note: `AccountInfo` is defined in the current crate
   --> programs/raceswap-v3/src/lib.rs:117:1
    |
117 | pub struct AccountInfo {
    | ^^^^^^^^^^^^^^^^^^^^^^
note: `anchor_lang::prelude::AccountInfo<'_>` is defined in crate `solana_program`
   --> src/account_info.rs:19:1
note: associated function defined here
   --> src/lib.rs:117:8
    = note: this error originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `AccountInfo: anchor_lang::Accounts<'_, IdlCreateAccountsBumps>` is not satisfied
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ the trait `anchor_lang::Accounts<'_, IdlCreateAccountsBumps>` is not implemented for `AccountInfo`
   |
   = help: the following other types implement trait `anchor_lang::Accounts<'info, B>`:
             `AccountLoader<'info, T>` implements `anchor_lang::Accounts<'info, B>`
             `Box<T>` implements `anchor_lang::Accounts<'info, B>`
             `CreateNonceAccount<'info>` implements `anchor_lang::Accounts<'info, CreateNonceAccountBumps>`
             `CreateNonceAccountWithSeed<'info>` implements `anchor_lang::Accounts<'info, CreateNonceAccountWithSeedBumps>`
             `ExecuteSwap<'info>` implements `anchor_lang::Accounts<'info, ExecuteSwapBumps>`
             `Interface<'info, T>` implements `anchor_lang::Accounts<'info, B>`
             `InterfaceAccount<'info, T>` implements `anchor_lang::Accounts<'info, B>`
             `Option<T>` implements `anchor_lang::Accounts<'info, B>`
           and 25 others
   = note: this error originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0609]: no field `is_signer` on type `AccountInfo`
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ unknown field
   |
   = note: this error originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0599]: no method named `key` found for struct `AccountInfo` in the current scope
   --> programs/raceswap-v3/src/lib.rs:23:1
    |
23  | #[program]
    | ^^^^^^^^^^ method not found in `AccountInfo`
...
117 | pub struct AccountInfo {
    | ---------------------- method `key` not found for this struct
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following trait defines an item `key`, perhaps you need to implement it:
            candidate #1: `anchor_lang::Key`
    = note: this error originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0609]: no field `executable` on type `AccountInfo`
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ unknown field
   |
   = note: this error originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `anchor_lang::prelude::Account<'_, __idl::IdlAccount>: AsRef<AccountInfo>` is not satisfied
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ the trait `AsRef<AccountInfo>` is not implemented for `anchor_lang::prelude::Account<'_, __idl::IdlAccount>`
   |
   = help: the following other types implement trait `AsRef<T>`:
             `anchor_lang::prelude::Account<'_, T>` implements `AsRef<T>`
             `anchor_lang::prelude::Account<'_, T>` implements `AsRef<anchor_lang::prelude::AccountInfo<'_>>`
   = note: this error originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `anchor_lang::prelude::Signer<'_>: AsRef<AccountInfo>` is not satisfied
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ the trait `AsRef<AccountInfo>` is not implemented for `anchor_lang::prelude::Signer<'_>`
   |
   = help: the trait `AsRef<AccountInfo>` is not implemented for `anchor_lang::prelude::Signer<'_>`
           but trait `AsRef<anchor_lang::prelude::AccountInfo<'_>>` is implemented for it
   = help: for that trait implementation, expected `anchor_lang::prelude::AccountInfo<'_>`, found `AccountInfo`
   = note: this error originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `AccountInfo: anchor_lang::Accounts<'_, IdlCloseAccountBumps>` is not satisfied
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ the trait `anchor_lang::Accounts<'_, IdlCloseAccountBumps>` is not implemented for `AccountInfo`
   |
   = help: the following other types implement trait `anchor_lang::Accounts<'info, B>`:
             `AccountLoader<'info, T>` implements `anchor_lang::Accounts<'info, B>`
             `Box<T>` implements `anchor_lang::Accounts<'info, B>`
             `CreateNonceAccount<'info>` implements `anchor_lang::Accounts<'info, CreateNonceAccountBumps>`
             `CreateNonceAccountWithSeed<'info>` implements `anchor_lang::Accounts<'info, CreateNonceAccountWithSeedBumps>`
             `ExecuteSwap<'info>` implements `anchor_lang::Accounts<'info, ExecuteSwapBumps>`
             `Interface<'info, T>` implements `anchor_lang::Accounts<'info, B>`
             `InterfaceAccount<'info, T>` implements `anchor_lang::Accounts<'info, B>`
             `Option<T>` implements `anchor_lang::Accounts<'info, B>`
           and 25 others
   = note: this error originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `anchor_lang::prelude::Account<'info, __idl::IdlAccount>: AsRef<AccountInfo>` is not satisfied
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ the trait `AsRef<AccountInfo>` is not implemented for `anchor_lang::prelude::Account<'info, __idl::IdlAccount>`
   |
   = help: the following other types implement trait `AsRef<T>`:
             `anchor_lang::prelude::Account<'_, T>` implements `AsRef<T>`
             `anchor_lang::prelude::Account<'_, T>` implements `AsRef<anchor_lang::prelude::AccountInfo<'_>>`
   = note: this error originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0599]: no method named `try_borrow_data` found for reference `&AccountInfo` in the current scope
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^
   |
   = note: this error originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)
help: there is a method `borrow_mut` with a similar name
   |
23 | borrow_mut
   |

error[E0599]: no method named `try_borrow_mut_data` found for reference `&AccountInfo` in the current scope
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^
   |
   = note: this error originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)
help: there is a method `borrow_mut` with a similar name
   |
23 | borrow_mut
   |

error[E0277]: the trait bound `anchor_lang::prelude::Account<'_, __idl::IdlAccount>: AsRef<AccountInfo>` is not satisfied
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ the trait `AsRef<AccountInfo>` is not implemented for `anchor_lang::prelude::Account<'_, __idl::IdlAccount>`
   |
   = help: the following other types implement trait `AsRef<T>`:
             `anchor_lang::prelude::Account<'_, T>` implements `AsRef<T>`
             `anchor_lang::prelude::Account<'_, T>` implements `AsRef<anchor_lang::prelude::AccountInfo<'_>>`
   = note: this error originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0599]: no method named `data_len` found for reference `&AccountInfo` in the current scope
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ method not found in `&AccountInfo`
   |
   = note: this error originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0599]: no method named `lamports` found for reference `&AccountInfo` in the current scope
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ method not found in `&AccountInfo`
   |
   = note: this error originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0599]: no method named `realloc` found for reference `&AccountInfo` in the current scope
  --> programs/raceswap-v3/src/lib.rs:23:1
   |
23 | #[program]
   | ^^^^^^^^^^ method not found in `&AccountInfo`
   |
   = help: items from traits can only be used if the trait is implemented and in scope
   = note: the following trait defines an item `realloc`, perhaps you need to implement it:
           candidate #1: `GlobalAlloc`
   = note: this error originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0308]: mismatched types
   --> programs/raceswap-v3/src/lib.rs:23:1
    |
23  | #[program]
    | ^^^^^^^^^^
    | |
    | expected `&[AccountInfo<'_>]`, found `&[AccountInfo]`
    | arguments to this function are incorrect
    |
    = note: `AccountInfo` and `anchor_lang::prelude::AccountInfo<'_>` have similar names, but are actually distinct types
note: `AccountInfo` is defined in the current crate
   --> programs/raceswap-v3/src/lib.rs:117:1
    |
117 | pub struct AccountInfo {
    | ^^^^^^^^^^^^^^^^^^^^^^
note: `anchor_lang::prelude::AccountInfo<'_>` is defined in crate `solana_program`
   --> src/account_info.rs:19:1
note: associated function defined here
   --> src/context.rs:57:12
    = note: this error originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0107]: struct takes 0 lifetime arguments but 1 lifetime argument was supplied
   --> programs/raceswap-v3/src/lib.rs:84:36
    |
84  |         let mut account_infos: Vec<AccountInfo<'info>> = vec![ctx.accounts.jupiter_program.to_account_info()];
    |                                    ^^^^^^^^^^^------- help: remove the unnecessary generics
    |                                    |
    |                                    expected 0 lifetime arguments
    |
note: struct defined here, with 0 lifetime parameters
   --> programs/raceswap-v3/src/lib.rs:117:12
    |
117 | pub struct AccountInfo {
    |            ^^^^^^^^^^^

error[E0308]: mismatched types
   --> programs/raceswap-v3/src/lib.rs:84:63
    |
84  |         let mut account_infos: Vec<AccountInfo<'info>> = vec![ctx.accounts.jupiter_program.to_account_info()];
    |                                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `AccountInfo`, found `AccountInfo<'_>`
    |
    = note: `anchor_lang::prelude::AccountInfo<'_>` and `AccountInfo` have similar names, but are actually distinct types
note: `anchor_lang::prelude::AccountInfo<'_>` is defined in crate `solana_program`
   --> src/account_info.rs:19:1
note: `AccountInfo` is defined in the current crate
   --> programs/raceswap-v3/src/lib.rs:117:1
    |
117 | pub struct AccountInfo {
    | ^^^^^^^^^^^^^^^^^^^^^^

error[E0308]: mismatched types
   --> programs/raceswap-v3/src/lib.rs:86:32
    |
86  |             account_infos.push(acc.clone());
    |                           ---- ^^^^^^^^^^^ expected `AccountInfo`, found `AccountInfo<'_>`
    |                           |
    |                           arguments to this method are incorrect
    |
    = note: `anchor_lang::prelude::AccountInfo<'info>` and `AccountInfo` have similar names, but are actually distinct types
note: `anchor_lang::prelude::AccountInfo<'info>` is defined in crate `solana_program`
   --> src/account_info.rs:19:1
note: `AccountInfo` is defined in the current crate
   --> programs/raceswap-v3/src/lib.rs:117:1
    |
117 | pub struct AccountInfo {
    | ^^^^^^^^^^^^^^^^^^^^^^
note: method defined here
   --> /home/runner/work/platform-tools/platform-tools/out/rust/library/alloc/src/vec/mod.rs:2411:12

error[E0308]: mismatched types
  --> programs/raceswap-v3/src/lib.rs:90:29
   |
90 |         invoke(&jupiter_ix, &account_infos)?;
   |         ------              ^^^^^^^^^^^^^^ expected `&[AccountInfo<'_>]`, found `&Vec<AccountInfo>`
   |         |
   |         arguments to this function are incorrect
   |
   = note: expected reference `&[anchor_lang::prelude::AccountInfo<'_>]`
              found reference `&Vec<AccountInfo>`
note: function defined here
  --> src/program.rs:132:8

error[E0277]: the trait bound `anchor_lang::prelude::Signer<'_>: AsRef<AccountInfo>` is not satisfied
  --> programs/raceswap-v3/src/lib.rs:97:10
   |
97 | #[derive(Accounts)]
   |          ^^^^^^^^ the trait `AsRef<AccountInfo>` is not implemented for `anchor_lang::prelude::Signer<'_>`
   |
   = help: the trait `AsRef<AccountInfo>` is not implemented for `anchor_lang::prelude::Signer<'_>`
           but trait `AsRef<anchor_lang::prelude::AccountInfo<'_>>` is implemented for it
   = help: for that trait implementation, expected `anchor_lang::prelude::AccountInfo<'_>`, found `AccountInfo`
   = note: this error originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `anchor_lang::prelude::UncheckedAccount<'_>: AsRef<AccountInfo>` is not satisfied
  --> programs/raceswap-v3/src/lib.rs:97:10
   |
97 | #[derive(Accounts)]
   |          ^^^^^^^^ the trait `AsRef<AccountInfo>` is not implemented for `anchor_lang::prelude::UncheckedAccount<'_>`
   |
   = help: the trait `AsRef<AccountInfo>` is not implemented for `anchor_lang::prelude::UncheckedAccount<'_>`
           but trait `AsRef<anchor_lang::prelude::AccountInfo<'_>>` is implemented for it
   = help: for that trait implementation, expected `anchor_lang::prelude::AccountInfo<'_>`, found `AccountInfo`
   = note: this error originates in the derive macro `Accounts` (in Nightly builds, run with -Z macro-backtrace for more info)

Some errors have detailed explanations: E0107, E0277, E0308, E0599, E0609.
For more information about an error, try `rustc --explain E0107`.
warning: `raceswap-v3` (lib) generated 10 warnings (5 duplicates)
error: could not compile `raceswap-v3` (lib) due to 29 previous errors; 10 warnings emitted